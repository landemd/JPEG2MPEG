AI提示词
1、编写程序。程序功能是将拍摄的照片和录制的声音转成视频文件；通过UI界面添加图片，添加方式分为单张图片添加、整个文件夹添加、鼠标拖拽到程序中添加等方式，添加之后程序中能显示缩略图，缩略图显示的顺序分为按照文件名称、按照创建时间等，默认按照创建时间的先后顺序依次显示，可以通过鼠标拖拽调整图片的次序和在时间轴上的位置；通过UI界面添加声音文件，添加方式分为单个文件添加、整个文件夹添加、鼠标拖拽到程序中添加等方式，添加之后每个声音文件显示一个声音层，根据所有声音文件的时间长度和显示时间轴，默认按照创建声音文件的先后顺序依次接续放置声音文件在时间轴的位置，对声音文件可以裁剪；可以将调整好的图片和声音文件导出为视频文件。

2、采用Python3.13和pyQt5，代码前后端分离，功能按照模块组织，每个模块一个文件。

3、总结前面的错误，采用Python3.13和pyQt5，代码前后端分离，功能按照模块组织，每个模块一个文件，重新生成程序，提供所有文件的完整代码。程序功能是将拍摄的照片和录制的声音转成视频文件；通过UI界面添加图片，添加方式分为单张图片添加、整个文件夹添加、鼠标拖拽到程序中添加等方式，添加之后程序中能显示缩略图，缩略图显示的顺序分为按照文件名称、按照创建时间等，默认按照创建时间的先后顺序依次显示，可以通过鼠标拖拽调整图片的次序和在时间轴上的位置；通过UI界面添加声音文件，添加方式分为单个文件添加、整个文件夹添加、鼠标拖拽到程序中添加等方式，添加之后每个声音文件显示一个声音层，根据所有声音文件的时间长度和显示时间轴，默认按照创建声音文件的先后顺序依次接续放置声音文件在时间轴的位置，对声音文件可以裁剪；可以将调整好的图片和声音文件导出为视频文件。

4、给出requirements.txt文件，避免出现导入包版本不兼容的问题。
colorama       0.4.6
decorator      5.2.1
ImageIO        2.37.2
imageio-ffmpeg 0.6.0
moviepy        2.2.1
mutagen        1.47.0
numpy          2.3.5
pillow         11.3.0
pip            25.0.1
proglog        0.1.12
pydub          0.25.1
PyQt5          5.15.11
PyQt5-Qt5      5.15.2
PyQt5_sip      12.17.1
python-dotenv  1.2.1
tqdm           4.67.1
不要使用相对导入，避免超出了顶级包的范围。
[总结前面的错误：不要使用相对导入，避免超出了顶级包的范围；按照requirements.txt文件中的包版本构建程序]
采用Python3.13和pyQt5，代码前后端分离，功能按照模块组织，每个模块一个文件，重新生成程序，提供所有文件的完整代码。程序功能是将拍摄的照片和录制的声音转成视频文件；通过UI界面添加图片，添加方式分为单张图片添加、整个文件夹添加、鼠标拖拽到程序中添加等方式，添加之后程序中能显示缩略图，缩略图显示的顺序分为按照文件名称、按照创建时间等，默认按照创建时间的先后顺序依次显示，可以通过鼠标拖拽调整图片的次序和在时间轴上的位置；通过UI界面添加声音文件，添加方式分为单个文件添加、整个文件夹添加、鼠标拖拽到程序中添加等方式，添加之后每个声音文件显示一个声音层，根据所有声音文件的时间长度和显示时间轴，默认按照创建声音文件的先后顺序依次接续放置声音文件在时间轴的位置，对声音文件可以裁剪；可以将调整好的图片和声音文件导出为视频文件。

5、利用延迟导入

6、优化的ai提示词如下：
请基于以下依赖版本，创建一个完整的媒体合成工具程序，能够将图片序列与音频文件合成为视频。

【依赖版本】
colorama==0.4.6
decorator==5.2.1
imageio==2.37.2
imageio-ffmpeg==0.6.0
moviepy==2.2.1
mutagen==1.47.0
numpy==2.3.5
pillow==11.3.0
proglog==0.1.12
python-dotenv==1.2.1
tqdm==4.67.1
PyQt5==5.15.11
PyQt5-Qt5==5.15.2
PyQt5_sip==12.17.1

【功能需求】
1. 图片管理：添加单张图片、添加整个文件夹中的图片，在“图片文件区”显示缩略图，支持按图片的创建时间/文件名/文件大小排序，图片按照排序，横向显示在“图片文件区”内。
2. 音频管理：添加音频文件、显示音频信息（时长、大小）
3. 拖拽排序：支持在列表中拖拽调整顺序
4. 时间轴可视化：按照添加的音频文件的总时长生成时间轴。
5. 图片排序：计算添加的图片中，创建时间最早和最晚的产值记作100%，生成的时间轴总长度也记作100%，图片按照创建时间与最早的图片创建时间的差值在图片100%中占的比例，对应显示在时间轴的位置上。
6. 视频导出：将所有图片按顺序合成为视频，添加音频轨道，导出为MP4格式
7. 进度显示：导出过程中显示进度条

【整体风格】
- UI界面的布局参照提供的图片
- 采用深色主题配色方案，主色调为深灰(#1E1E1E)和蓝灰(#252526)
- 使用卡片式布局，每个功能区域用圆角边框分隔
- 支持高DPI显示，界面元素自适应缩放
- 媒体管理区整体布局采用上中下分割，上部为 图片文件区，中部为时间轴区，下部为音频文件区

【主窗口结构】
- 窗口标题：":JPEG2MPEG-[文件名]"，新建文件时，[ ]内显示为："*新视频"
- 最小尺寸：900x600像素
- 默认尺寸：1200x800像素
- 背景色：#1E1E1E，文字色：#D4D4D4

【工具栏设计】
- 位置：顶部水平工具栏
- 图标大小：32x32像素
- 按钮包括：
  * "添加图片" - 打开图片文件选择对话框
  * "添加文件夹" - 打开文件夹选择对话框
  * "添加音频" - 打开音频文件选择对话框
  * "导出视频" - 打开视频保存对话框
  * "清空所有" - 清空所有媒体文件（需确认）
- 按钮间距：适当留白，使用分隔符分组

【媒体管理区域】
1. 图片文件区（上）
   - 卡片标题：位于该区域左侧，文字"图片文件"上下排列。
   - 排序控件：位于该区域右上，下拉框包含"按创建时间"、"按文件名"、"按文件大小"。
   - 文件视图：缩略图模式，大小100x100像素，从左到右依次排列，超出窗口后增加滚动条。
   - 支持拖拽排序，图标间距按照拖放的距离设定，拖放过程中超出窗口是滚动条自动滚动。
   - 每个图片上部显示文件名，下部显示创建时间，文字长度超过缩略图宽度时显示为*

2、时间轴区（中）
- 卡片标题：位于该区域左侧，文字"时间轴"上下排列
- 时间轴控件：横向滚动的时间刻度尺（单位：秒），每10秒显示一个标尺线，标尺线之间间隔为10像素
- 时间轴标尺线下方每隔60秒显示刻度的数字
- 时间轴下方显示滚动条，时间轴的滚动条滚动时，图片文件区和音频文件区同时滚动

3. 音频文件区（下）
   - 卡片标题：位于该区域左侧，文字"音频文件"上下排列
   - 支持拖拽排序
   - 每个音频文件上部显示文件名，下部显示声音文件时长，文字长度超过缩略图宽度时显示为*

【交互功能】
1. 文件添加方式：
   - 点击按钮选择文件/文件夹
   - 直接拖拽文件到窗口任意位置
   - 自动识别文件类型（图片/音频）

2. 拖拽排序：
   - 在图片列表和音频列表中均可拖拽调整顺序
   - 拖拽时有视觉反馈

3. 状态反馈：
   - 状态栏显示当前操作结果
   - 进度条显示视频导出进度
   - 颜色编码的状态指示器（绿色=就绪，黄色=进行中，红色=错误）

【特殊效果】
- 鼠标悬停时卡片边框高亮（#007ACC）
- 选中项目时背景色变化（#007ACC）
- 按钮点击时有轻微动画效果
- 导出过程中界面保持响应

【响应式布局】
- 使用分割器(QSplitter)允许用户调整各区域大小
- 媒体管理区初始占比：图片区40%，时间轴区20%，音频区40%

【技术要求】
1. 使用PyQt5创建GUI界面，采用深色主题
2. 使用绝对导入，避免相对导入导致的错误
3. 延迟导入大型库（如moviepy），在函数内部导入以避免启动时的导入错误
4. 每个包目录必须包含__init__.py文件
5. 完整的错误处理机制，提供友好的错误提示
6. 代码结构清晰，分为以下模块：
   - main.py: 程序入口
   - ui/: 用户界面模块
     - main_window.py: 主窗口
     - timeline_widget.py: 时间轴控件
     - draggable_list.py: 可拖拽列表
     - widgets.py: 通用UI组件
   - core/: 核心逻辑模块
     - media_manager.py: 媒体文件管理
     - export_manager.py: 视频导出管理
     - models.py: 数据模型
   - utils/: 工具模块
     - file_utils.py: 文件操作
     - image_utils.py: 图像处理
     - audio_utils.py: 音频处理

【Pillow图像处理安全规范】
- 禁止使用 PIL.ImageQt 模块（存在兼容性问题）
- 必须处理图像模式转换（RGB/RGBA）
- 添加异常捕获和回退机制（默认灰色图标）

【文件对话框安全规范】
- 构建文件过滤器时使用双分号分隔格式
- 验证文件路径是否为本地文件
- 拒绝处理非图片文件

【拖放图片处理要求】
**图像处理**
1. 使用Pillow生成缩略图，调用pillow模块时，检查兼容性问题，注意依赖的pillow的版本为11.3.0
2. 转换流程：PIL Image → bytes → QImage → QPixmap
3. 必须处理RGB/RGBA模式转换
4. 异常时返回100x100浅灰QPixmap

**文件操作**
1. 文件对话框使用：
2. 拖放处理时验证验证是否为图片文件
3. 忽略非文件协议

**错误处理**
- 所有IO操作try-except包裹
- 打印详细错误日志但不崩溃
- 用户可见的错误用QMessageBox友好提示

【注意事项】
1. 在export_manager.py中，将moviepy导入放在函数内部，避免模块加载失败
2. 确保所有PyQt5组件在使用前都已正确导入
3. 提供完整的安装和运行说明
4. 包含FFmpeg的安装指导（用于音频处理）
5. 代码要有详细的注释，便于理解和维护

生成完整的、可直接运行的代码，并对照上述要求检查代码，检查完之后再呈现完整代码。


